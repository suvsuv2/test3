АННОТАЦИЯ
В данном программном документе приведено руководство системного
программиста по настройке и использованию встроенного программного
обеспечения навигационного модуля МН3333 «FIRMWARE MN3333» (далее ПО),
предназначенного для прошивки навигационных модулей производства ООО «ВегаАбсолют» для обеспечения их функционирования и выполнения всех рабочих
процессов.
В разделе «Общие сведения о программе» указаны назначение и функции
программы и сведения о технических и программных средствах, обеспечивающих
выполнение данной программы, а также требования к персоналу.
В разделе «Структура программы» приведены сведения о структуре
программы, ее составных частях, о связях между составными частями и о связях с
другими программами.
В разделе «Настройка программы» приведено описание действий по настройке
программы на условия конкретного применения (настройка на состав технических и
программных средств, выбор функций и др.).
В разделе «Проверка программы» приведено описание способов проверки,
позволяющих дать общее заключение о работоспособности программы (контрольные
примеры, методы прогона, результаты).
Оформление программного документа «Руководство системного
программиста» произведено по требованиям ЕСПД (ГОСТ 19.101-77 1), ГОСТ 19.103-
77 2), ГОСТ 19.104-78* 3), ГОСТ 19.105-78* 4), ГОСТ 19.106-78* 5), ГОСТ 19.503-79*
6), ГОСТ 19.604-78* 7)).
1. ОБЩИЕ СВЕДЕНИЯ О ПРОГРАММЕ
1.1. Назначение программы
Описываемое программное обеспечение имеет наименование: «FIRMWARE
MN3333» (далее ПО МН3333).
ПО предназначено для прошивки навигационных модулей производства ООО
«Вега-Абсолют» для обеспечения их функционирования и выполнения всех рабочих
процессов.
Модуль МН3333 предназначен для встраивания в аппаратуру спутниковой
навигации для обеспечения измерений текущих навигационных параметров с
использованием глобальных навигационных спутниковых систем (ГНСС) ГЛОНАСС
и GPS и определения на их основе координат и скорости движения потребителя.
1.2. Функции программы
ПО МН3333 позволяет обеспечить выполнение следующих функций:
− Выдача навигационных параметров по протоколу NMEA с частотой 1 Гц;
− Обмен с внешним оборудованием по последовательным портам УАПП
(UART).
1.3. Минимальный состав технических средств
В состав используемых технических средств должны входить:
− Модуль навигационный МН3333;
− Антенна ГЛОНАСС/GPS;
− Демо-плата или аппаратура спутниковой навигации.
Минимальные требования к характеристикам МН3333:
− ARM7EJ-S CPU;
− Тактовая частота 158 МГц;
− объем flash памяти – 8 Мб;
− объем ОЗУ – 256 Кб.
RU.НЕРФ.00309-01 32 01
5
1.4. Минимальный состав программных средств
Для выполнения функций ПО МН3333 необходима реализация программного
обеспечения второй стороны в соответствии с протоколами передачи данных,
реализованными в ПО МН3333.
Для передачи навигационных данных используется протокол NMEA. Все
коммуникации с аппаратурой спутниковой навигации должны формироваться в
соответствии с этим протоколом.
1.5. Требования к персоналу (системному программисту)
Системный программист должен иметь минимум среднее техническое
образование.
Поскольку ПО МН3333 не является независимым продуктом, а входит в состав
системы по созданию аппаратуры спутниковой навигации, в обязанности персонала
входит не только обслуживание ПО МН3333, но и обслуживание всей системы.
В перечень задач, выполняемых системным программистом, должны входить:
− задача поддержания работоспособности технических средств;
− задача установки (инсталляции) и поддержания работоспособности
программных средств;
− задача установки (инсталляции) и поддержания работоспособности ПО
МН3333;
− задача диагностики и определение причин неисправности ПО МН3333.
RU.НЕРФ.00309-01 32 01
6
2. СТРУКТУРА ПРОГРАММЫ
2.1. Сведения о структуре программы
Принцип действия ПО МН3333 основан на параллельном приеме и обработке
32-мя измерительными каналами сигналов навигационных КА КНС ГЛОНАСС в
частотном диапазоне L1 (СТ-код), GPS на частоте L1 (C/A код) и GALILEO на частоте
E1. Модуль выполнен на основе специализированного набора микросхем (чипсета)
MТ3333.
2.2. Сведения о составных частях программы
ПО МН3333 включает в себя несколько модулей. Сведения о назначении
каждого модуля представлены в таблице 1.
Таблица 1 – Сведения о составных частях ПО «FIRMWARE MN3333»
Модуль Аннотация
Обработчик обмена по UART Обработчик протоколов обмена данными
(NMEA)
Утилиты MTK SDK
Утилиты входящие в состав набора
средств разработки MTK
Ядро MTK SDK Модуль обработки сигналов КА КНС и
вычисления навигационного решения
2.3. Сведения о связях между составными частями программы
Архитектура встроенного ПО МН3333 изображена на Рисунке 1.
RU.НЕРФ.00309-01 32 01
7
Рисунок 1 – Архитектура встроенного ПО МН3333
2.4. Сведения о связях с другими программами
Связи с другими программами отсутствуют.
RU.НЕРФ.00309-01 32 01
8
3. НАСТРОЙКА ПРОГРАММЫ
3.1. Настройка на состав технических средств
Поскольку ПО МН3333 предназначено только для установки на модули ООО
«Вега-Абсолют», оно не требует дополнительной настройки под состав технических
средств.
3.2. Настройка на состав программных средств
Взаимодействие с ПО МН3333 происходит при подключении к демо-плате или
аппаратуре спутниковой навигации с последующим подключением к персональному
компьютеру. Далее описан способ подключения аппаратуры к компьютеру.
3.2.1. Установка драйвера
Для считывания данных с аппаратуры на ПЭВМ необходимо установить
драйвер по ссылке: http://www.ftdichip.com/Drivers/VCP.htm. На этой странице
выбрать в таблице файл, соответствующий вашей системе. В той же таблице можно
найти руководство по установке нужного драйвера.
Далее описан метод установки драйвера для Windows 7 (64-bit).
RU.НЕРФ.00309-01 32 01
9
1. Скачав и распаковав архив с драйвером, подключите аппаратуру к
компьютеру по схеме.
2. Запустите на компьютере «Диспетчер устройств» из меню «Пуск».
Появится окно:
3. Правой кнопкой нажмите на выделенную строчку «USB <-> Serial» и в
контекстном меню выберите «Обновить драйверы». Появится окно:
RU.НЕРФ.00309-01 32 01
10
4. В этом окне выберите «Поиск и установка драйверов вручную».
5. В появившемся окне нажмите кнопку «Обзор» и укажите путь к папке с
драйвером.
6. Нажмите «Далее» - начнется установка драйвера.
RU.НЕРФ.00309-01 32 01
11
7. По завершении данного этапа перейдите в окно «диспетчер устройств» -
надпись «USB <-> Serial» изменится на «USB Serial Port».
8. В точности повторите действия, описанные в пунктах 3-5. По окончании
установки появится окно:
RU.НЕРФ.00309-01 32 01
12
9. После этого в «Диспетчере устройств» появится раздел «Порты (COM и
LPT)» со списком виртуальных портов.
RU.НЕРФ.00309-01 32 01
13
3.2.2. Считывание данных с COM-порта.
Для считывания данных с COM-порта можно установить любую подходящую
для этого программу. В нашем примере это программа Hercules, которую можно
скачать по ссылке http://www.hw-group.com/products/hercules/index_en.html. После
скачивания, программу можно сразу запускать, она не требует установки.
Рабочая область программы Hercules выглядит следующим образом:
На скриншоте также указаны необходимые параметры для считывания данных
с аппаратуры. Для начала считывания нажмите кнопку «Open».
Программа начнёт выдавать данные с аппаратуры в формате NMEA:
RU.НЕРФ.00309-01 32 01
14
RU.НЕРФ.00309-01 32 01
15
4. ПРОВЕРКА ПРОГРАММЫ
4.1. Описание способов проверки
Для проверки ПО МН3333 необходимо подключить модуль к компьютеру через
демо-плату. Демо-плата позволяет локализовать неполадку по индикации.
Убедиться, что питание успешно подключено можно по индикатору GNSS_On,
расположенному в правом верхнем углу демо-платы (рис.4.1). Индикатор питания
горит красным всё время, пока подключено питание. Если индикатор питания не
горит, это значит, что питание не подключено. Следует проверить исправность
соединительного кабеля и USB-порта.
Рисунок 4.1. Положение индикатора питания ГНСС-антенны.
При считывании данных с COM-порта при помощи терминальной программы
(например, Hercules) мигает зеленым цветом индикатор Rx1, расположенный слева от
аппаратуры на демо-плате (рис.4.2).
RU.НЕРФ.00309-01 32 01
16
Рисунок 4.2. Положение индикатора считывания данных с аппаратуры.
Если индикатор Rx1 не горит, или после пары вспышек прекращает гореть, это
означает, что данные с аппаратуры не считываются. Следует проверить, правильно
ли настроен COM-порт, и параметры считывания данных в терминальной программе.
RU.НЕРФ.00309-01 32 01
17
5. СООБЩЕНИЯ СИСТЕМНОМУ ПРОГРАММИСТУ
Информационные сообщения для системного программиста отсутствуют.